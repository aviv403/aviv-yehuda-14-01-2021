(this["webpackJsonpaviv-yehuda-14-01-2021"]=this["webpackJsonpaviv-yehuda-14-01-2021"]||[]).push([[0],{98:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(1),r=c.n(n),i=c(14),o=c.n(i),s=c(15),j=c(111),l=c(112),u=c(104),b=c(106),d=c(8),O=c(41),x=c(110),y=c(57),h=c(58),m=c(56),f=c.n(m);var g=function(e,t,c){var a=Object(n.useState)(null),r=Object(s.a)(a,2),i=r[0],o=r[1],j=Object(d.b)(),l=function(e,t,c){var a="",n="";switch(e){case"autocomplete":a="locations/v1/cities/autocomplete",n="?apikey=".concat(c,"&q=").concat(t.textInput);break;case"todayForcast":a="currentconditions/v1/",n="".concat(t.cityKey,"?apikey=").concat(c);break;case"5DaysForcast":a="forecasts/v1/daily/5day/",n="".concat(t.cityKey,"?apikey=").concat(c);break;case"cityInfo":a="locations/v1/cities/search",n="?apikey=".concat(c,"&q=").concat(t.cityName);break;case"geoLocation":if(t.geoLocation){var r=t.geoLocation,i=r.latitude,o=r.longitude;a="locations/v1/cities/geoposition/search",n="?apikey=".concat(c,"&q=").concat(i,",").concat(o)}break;default:return""}return""===n?"":"https://dataservice.accuweather.com/"+a+n}(e,t,c);return Object(n.useEffect)((function(){var e=!0;return l&&e&&f.a.get(l).then((function(e){o(e.data)})).catch((function(e){j({type:"HAS_API_ERROR"})})),function(){return e=!1}}),[l,t.city]),{data:i}},v=c(105),p=c(113),N=function(e){var t=e.dailyForecast,c=e.cityData,n=Object(d.c)((function(e){return e})),r=n.celsius,i=n.darkMode,o=function(e){var t=Math.floor((Number.parseInt(e)-32)*(5/9));return r?"".concat(t," \xb0C"):"".concat(e," \xb0F")};return Object(a.jsxs)(p.a,{style:{height:"250px",width:"150px"},className:i?"bg-dark border-secondary text-light":"bg-light text-dark",children:[Object(a.jsx)(p.a.Header,{}),Object(a.jsxs)(p.a.Body,{children:[c&&Object(a.jsx)(p.a.Title,{children:c.LocalizedName}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a.Title,{children:function(){var e=new Date(t.Date).toString();return e.substr(0,e.indexOf(" "))}()}),Object(a.jsx)(p.a.Img,{className:"mt-2",src:function(){var e=Number.parseInt(t.Day.Icon)<10?"0".concat(t.Day.Icon):"".concat(t.Day.Icon);return"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png")}(),style:{width:"50%"}}),Object(a.jsx)(p.a.Text,{className:"mt-3",children:o(t.Temperature.Maximum.Value)}),Object(a.jsx)(p.a.Text,{children:o(t.Temperature.Minimum.Value)})]})]}),Object(a.jsx)(p.a.Footer,{})]})},I=r.a.memo(N),T=function(e){var t=e.cityData,c=e.accKey,n=t.Key,i=g("5DaysForcast",{cityKey:n},c).data;return Object(a.jsx)(u.a,{className:"d-inline justify-content-center text-center",style:{marginTop:"40px",marginBottom:"20px"},children:Object(a.jsx)(x.a,{inline:!0,className:"justify-content-center",children:Object(a.jsx)(v.a,{children:i&&i.DailyForecasts.map((function(e,t){return Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)(I,{dailyForecast:e})},t)}))})})})},C=r.a.memo(T),E=function(e){var t=e.cityName,c=e.cityKey,n=e.accKey,r=Object(d.c)((function(e){return e})),i=r.celsius,o=r.darkMode,s=Object(d.b)(),j=g("todayForcast",{cityName:t,cityKey:c},n).data;return Object(a.jsx)(p.a,{className:o?"bg-dark border-secondary mt-4":"bg-light mt-4",children:j&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(p.a.Body,{children:[Object(a.jsx)(p.a.Title,{className:o?"text-light border-light":"text-dark",children:t}),Object(a.jsx)(p.a.Img,{className:"text-center",style:{width:"60%"},src:function(){var e=Number.parseInt(j[0].WeatherIcon)<10?"0".concat(j[0].WeatherIcon):"".concat(j[0].WeatherIcon);return"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png")}()}),Object(a.jsx)(p.a.Text,{className:o?"text-light":"text-dark",children:j[0].WeatherText}),Object(a.jsx)(p.a.Text,{children:Object(a.jsx)(h.a,{onClick:function(){s({type:"TOGGLE_CELSIUS"})},variant:"outline",className:"text-primary",style:{fontSize:"25px",fontWeight:"bold"},children:function(e){var t=Math.floor((Number.parseInt(e)-32)*(5/9)),c=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(a.Fragment,{children:[t," \xb0C"]}),Object(a.jsx)(p.a.Text,{className:"text-muted",style:{fontSize:"15px"},children:e+" \xb0F"})]}),n=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(a.Fragment,{children:[e," \xb0F"]}),Object(a.jsx)(p.a.Text,{className:"text-muted",style:{fontSize:"15px"},children:t+"\xb0C"})]});return i?c:n}(j[0].Temperature.Imperial.Value)})})]})})})},k=function(){var e=Object(d.c)((function(e){return e})),t=e.cityName,c=e.accKey,r=e.favoriteCities,i=e.darkMode,o=r.some((function(e){return e.cityName===t})),s=Object(n.useContext)(Z),j=g("cityInfo",{cityName:t},c).data,l=Object(d.b)();return Object(a.jsxs)(u.a,{className:i?"bg-dark border border-light mt-3":"bg-light border border-secondary mt-3",children:[Object(a.jsx)(b.a,{className:"justify-content-center",children:Object(a.jsxs)(x.a,{inline:!0,className:"d-inline",children:[Object(a.jsx)(y.a,{children:j&&Object(a.jsx)(E,{cityName:j[0].LocalizedName,cityKey:j[0].Key,accKey:c})}),Object(a.jsx)(y.a,{children:Object(a.jsx)(h.a,{variant:o?"outline-danger":"outline-success",size:"lg",className:i?"bg-dark text-light":"bg-light text-dark",onClick:function(){var e=j[0].Key;o?(l({type:"REMOVE_FAVORITE_CITY",cityKey:e}),s((function(t){return t.filter((function(t){return t.cityKey!==e}))}))):(l({type:"ADD_FAVORITE_CITY",favoriteCity:{cityName:t,cityKey:e}}),s((function(c){return[].concat(Object(O.a)(c),[{cityName:t,cityKey:e}])})))},children:Object(a.jsxs)(x.a.Text,{size:"lg",children:[o?"Remove from":"Add to"," Favorites"]})})})]})}),Object(a.jsx)(b.a,{children:j&&Object(a.jsx)(C,{cityData:j[0],accKey:c})})]})},K=r.a.memo(k),F=c(107),_=c(43),S=c(59),L=function(e){var t=e.msg;return e.hasError&&_.c.error(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S.a,{})," ",t]}),{position:"top-center",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:_.a}),Object(a.jsx)("div",{children:Object(a.jsx)(_.b,{})})},A=c(60),D=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e})),c=t.accKey,r=t.darkMode,i=Object(n.useState)(""),o=Object(s.a)(i,2),j=o[0],l=o[1],O=Object(n.useRef)(!1),h=g("autocomplete",{textInput:j},c).data,m=function(t){t.preventDefault(),j&&(h&&h.some((function(e){return j.toLowerCase()===e.LocalizedName.toLowerCase()}))?(O.current=!1,e({type:"SET_CITY_NAME",cityName:j})):O.current=!0),l("")};return Object(a.jsxs)(u.a,{className:"d-flex justify-content-center text-center",children:[Object(a.jsx)(x.a,{onSubmit:m,style:{margin:"10px"},children:Object(a.jsx)(b.a,{children:Object(a.jsx)(y.a,{children:Object(a.jsxs)(F.a,{children:[Object(a.jsx)(x.a.Control,{list:"cities",autoComplete:"off",className:r?"bg-dark text-light":"bg-light text-dark",required:!0,type:"text",placeholder:"Search City",onChange:function(e){O.current=!1;var t=e.target.value;t=t.replace(/[^A-Za-z-' ']/gi,""),console.log(t),l(t)},value:j}),Object(a.jsx)(F.a.Prepend,{children:Object(a.jsx)(F.a.Text,{className:r?"bg-secondary":"bg-secondary border-secondary",onClick:m,children:Object(a.jsx)(A.a,{})})}),Object(a.jsx)("datalist",{id:"cities",style:{backgroundColor:"red"},children:h&&h.map((function(e){return Object(a.jsx)("option",{value:e.LocalizedName},e.Key)}))})]})})})}),Object(a.jsx)(L,{msg:"Invalid Input!",hasError:O.current})]})},M=function(){var e=Object(d.c)((function(e){return e.hasError}));return Object(a.jsx)(u.a,{className:"bg-warnings d-flex justify-content-center",children:Object(a.jsxs)(b.a,{className:"text-center justify-content-center",style:{margin:"20px"},children:[Object(a.jsx)(D,{}),e?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(L,{msg:"ERROR: API KEY!",hasError:!0})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(K,{})})]})})},w=r.a.memo(M),R=c(61),G=c.n(R),P=c(108),z=c(109),V=function(e){var t=e.favoriteCity,c=e.accKey,r=t.cityName,i=t.cityKey,o=Object(d.c)((function(e){return e})),s=o.celsius,j=o.darkMode,l=Object(d.b)(),u=g("todayForcast",{cityName:r,cityKey:i},c).data,b=Object(n.useContext)(J);return Object(a.jsx)(P.a,{in:!0,children:Object(a.jsx)(p.a,{style:{height:"240px",width:"180px"},onClick:function(){l({type:"SET_CITY_NAME",cityName:r}),b("home")},className:j?"bg-secondary border-light text-light mt-4":" mt-4",children:u&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(p.a.Body,{className:"text-center",children:[Object(a.jsx)(p.a.Title,{children:r}),Object(a.jsx)(z.a.Divider,{}),Object(a.jsx)(p.a.Img,{className:"text-center",style:{width:"50%",marginTop:"1rem"},src:function(){var e=Number.parseInt(u[0].WeatherIcon)<10?"0".concat(u[0].WeatherIcon):"".concat(u[0].WeatherIcon);return"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png")}()}),Object(a.jsx)(p.a.Text,{className:"mt-2",children:u[0].WeatherText}),Object(a.jsx)(p.a.Text,{children:function(e){var t=Math.floor((Number.parseInt(e)-32)*(5/9));return s?"".concat(t," \xb0C"):"".concat(e," \xb0F")}(u[0].Temperature.Imperial.Value)})]})})})})},Y=function(){var e=Object(d.c)((function(e){return e})),t=e.favoriteCities,c=e.accKey,n=Object(d.c)((function(e){return e.hasError}));return Object(a.jsx)(u.a,{className:"d-flex justify-content-center text-center",children:!n&&Object(a.jsx)(v.a,{children:t.map((function(e){return Object(a.jsx)(y.a,{children:Object(a.jsx)(V,{favoriteCity:e,accKey:c})},e.cityKey)}))})})},W="home",B="favorites",J=r.a.createContext(),U=function(){var e=Object(n.useState)(W),t=Object(s.a)(e,2),c=t[0],r=t[1],i=Object(d.c)((function(e){return e})),o=i.darkMode,u=i.accKey,b=Object(d.b)(),O=Object(d.c)((function(e){return e.geoLocation})),x=g("geoLocation",{geoLocation:O},u).data;return Object(n.useEffect)((function(){x&&b({type:"SET_CITY_NAME",cityName:x.LocalizedName})}),[x]),Object(n.useEffect)((function(){document.body.style.backgroundColor=o?"gray":"white"}),[o]),Object(a.jsx)(J.Provider,{value:r,children:Object(a.jsxs)(j.a.Container,{activeKey:c,onSelect:r,children:[Object(a.jsx)("div",{className:"bg-dark d-flex",children:Object(a.jsxs)(l.a,{className:"container bg-dark justify-content-end",variant:"pills",children:[Object(a.jsx)(l.a.Item,{children:Object(a.jsx)(l.a.Link,{eventKey:W,children:"Home"})}),Object(a.jsx)(l.a.Item,{children:Object(a.jsx)(l.a.Link,{eventKey:B,children:"Favorites"})}),Object(a.jsx)(l.a.Item,{style:{marginLeft:"5rem",marginTop:"0.3rem"},children:Object(a.jsx)(G.a,{size:"sm",onstyle:"outline-secondary",offstyle:"outline-light",onlabel:"\u263e",offlabel:"\u263c",onChange:function(){b({type:"TOGGLE_DARK_MODE"})}})})]})}),Object(a.jsxs)(j.a.Content,{children:[Object(a.jsx)(j.a.Pane,{eventKey:W,children:Object(a.jsx)(w,{})}),Object(a.jsx)(j.a.Pane,{eventKey:B,children:Object(a.jsx)(Y,{})})]})]})})},H=function(e,t){var c="weather-app-"+e,a=Object(n.useState)((function(){var e=localStorage.getItem(c);return null!=e?JSON.parse(e):t instanceof Function?t():t})),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){localStorage.setItem(c,JSON.stringify(i))}),[c,i]),[i,o]},q=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e({latitude:t.coords.latitude,longitude:t.coords.longitude})})):t("Unknown")})).then((function(e){a(e)})).catch((function(e){a(null)}))}),[]),c},Z=r.a.createContext(),Q=function(){var e=H("favorites",[]),t=Object(s.a)(e,2),c=t[0],r=t[1],i=q(),o=Object(d.b)();return Object(n.useEffect)((function(){i&&o({type:"SET_GEO_LOCATION",geoLocation:i})}),[i]),Object(n.useEffect)((function(){c.map((function(e){return o({type:"ADD_FAVORITE_CITY",favoriteCity:e})}))}),[]),Object(a.jsx)(Z.Provider,{value:r,children:Object(a.jsx)(U,{})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,114)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))},$=(c(96),c(97),c(34)),ee=c(11),te={accKey:"ozdme2g09GVYvGGprRJxV1UohiPuTbJL",cityName:"Tel Aviv",favoriteCities:[],geoLocation:null,celsius:!0,darkMode:!1,hasError:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY_NAME":return Object(ee.a)(Object(ee.a)({},e),{},{cityName:t.cityName});case"UPDATE_SUGGESTIONS":return Object(ee.a)(Object(ee.a)({},e),{},{suggestions:t.suggestions});case"SET_GEO_LOCATION":return Object(ee.a)(Object(ee.a)({},e),{},{geoLocation:t.geoLocation});case"TOGGLE_CELSIUS":return Object(ee.a)(Object(ee.a)({},e),{},{celsius:!e.celsius});case"TOGGLE_DARK_MODE":return Object(ee.a)(Object(ee.a)({},e),{},{darkMode:!e.darkMode});case"HAS_API_ERROR":return Object(ee.a)(Object(ee.a)({},e),{},{hasError:!0});case"ADD_FAVORITE_CITY":return Object(ee.a)(Object(ee.a)({},e),{},{favoriteCities:[].concat(Object(O.a)(e.favoriteCities),[t.favoriteCity])});case"REMOVE_FAVORITE_CITY":var c=e.favoriteCities.filter((function(e){return e.cityKey!==t.cityKey}));return Object(ee.a)(Object(ee.a)({},e),{},{favoriteCities:c});default:return e}},ae=Object($.b)(ce);o.a.render(Object(a.jsx)(d.a,{store:ae,children:Object(a.jsx)(Q,{})}),document.getElementById("root")),X()}},[[98,1,2]]]);
//# sourceMappingURL=main.2022001b.chunk.js.map